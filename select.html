
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src='/res/res/js/common.js'></script>
</head>
<body>
<select id="top-select" name="group1" data-element="sub-select"></select>
<select id="sub-select" name="group2" data-element="low-select"></select>
<select id="low-select" name="group3"></select>
<script>
/*
//===============================================
// ネスティッド SELECT
// IEのために class でなく prototype ベースで実装
function SelectChain(mytag,selObj) {
    var myobj = $('#'+mytag);
    var sub = myobj.attr('data-element');
    this.my_obj = myobj;
    this.select_tag = selObj[mytag];  // array-list
    this.tag_id = mytag;
    this.Child_tag = ( sub === undefined) ? null : new SelectChain(sub,selObj);
};
SelectChain.prototype = {
    defaultList: function(val) {
        var self = this;
        self.SelectValue = val;
        self.my_obj.empty();
        self.my_obj.append('<option>選択してください</option>');
        for (var i = 0; i < self.select_tag.length; i++) {
            var value = self.select_tag[i];
            if(value[2] == val) {
                self.my_obj.append('<option value="'+value[0]+'"">'+value[1]+'</option>');
            }
        }
        if(self.Child_tag !== null) self.Child_tag.defaultList(0);
    },
    selfList: function (val) {
        var self = this;
        self.defaultList(val);
        self.my_obj.off().change(function() {
            var my_val = $(this).val();
            self.SelectValue = my_val;
            if(self.Child_tag !== null) self.Child_tag.selfList(my_val);
        });
    }
};
// JQueryプラグイン化する
(function ($) {
    // 連動セレクトタグ
    $.fn.ChainSelect = function (selObj) {
        var id = this.attr('id');
        var sel_chain = new SelectChain(id,selObj);
        sel_chain.selfList(0);
    };
})(jQuery);
*/

$(function() {
// 選択リストのチェイン
//   ID名: [ リスト要素 ]
//      要素： ID, NAME,      親ID
var objList = {
    'top-select': [
        [  1, "文書作成"        ],   // レベル0
        [  2, "インターネット"  ],
        [  3, "ユーティリティ", ],
        [  4, "画像＆サウンド", ],
        [  5, "ビジネス",       ],
        [  6, "パーソナル",     ],
        [  7, "家庭＆趣味",     ],
        [  8, "学習＆教育",     ],
        [  9, "ゲーム",         ],
        [ 10, "プログラミング", ],
        [ 11, "ハードウェア",   ],
    ],
    'sub-select': [
        [ 10, "PDF",            1],   // レベル1
        [ 11, "TeX",            1],
        [ 12, "テキストエディタ",1],
        [ 13, "パブリッシング", 1],
        [ 14, "フォント",       1],
        [ 15, "ラベル・名刺",   1],
        [ 16, "ワープロ",       1],
        [ 17, "印刷",           1],
        [ 18, "辞書",           1],
        [ 19, "地図",           1],
        [ 20, "日本語辞書",     1],
        [ 21, "顔文字",         2],
        [ 22, "その他",         2],
        [ 23, "HTML",           2],
        [ 24, "LAN・Internet",  2],
        [ 25, "Netware",        2],
        [ 26, "Web用",          2],
        [ 27, "メール",         2],
        [ 28, "通信",           2],
    ],
    'low-select': [
        [ 40, "WZEditor",       12],   // レベル2
        [ 41, "xyzzy",          12],
        [ 42, "NoEditor",       12],
        [ 43, "Mery",           12],
        [ 44, "Visual Studio Code",        12],
        [ 45, "gPad",           12],
        [ 46, "20.0",        21],
        [ 47, "19.7",        22],
        [ 48, "19.8",        23],
    ],
};

$('#top-select').ChainSelect(objList,41);

});

</script>

</body>
</html>
